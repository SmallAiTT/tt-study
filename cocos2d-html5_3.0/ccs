关于ccs的改造建议
=======================

## 小数问题

生产的json文件的小数希望只保留小数点后两位就好，否则容易在项目中带来一些不必要的麻烦。


## 打开工程后没做修改，关闭工程

打开了工程，没有做修改，关闭时点了“保存”，这时候json文件被修改了。

例如一个ui项目，我只是点击了左侧的列表进行查看而已，然后编辑我真正需要编辑的ui之后，关闭studio并点击了“保存”，

这时候刚刚那个只是为了查看而打开的json也被修改了。主要原因就是小数保留位数问题所造成的。

这个问题在我们使用git或者svn等进行多人协作开发的时候会产生各种蛋疼的问题。


## json文件中，如果是工程所带图标，会变成绝对路径

例如我拖了一个ImageView，然后没有设置图标，因为美术这时候还没来得及提供图片，但我要先编辑出来做功能。

这时候图标的路径就变成了你电脑上的绝对路径了。

个人觉得，这种路径应该用占位符的方式去表现，例如：`${studio}/Default/img.png`这种。

这个问题在我们使用git或者svn等进行多人协作开发的时候会产生各种蛋疼的问题。


## 生产的exportjson文件中的后缀名大小写问题

工程中，文件名后缀可能大写可能小写，这时候到处的exportjson和plist中的就没有对应上了。

plist中的是正确的，但是exportjson中的就可能不正确的。


## 如果项目图片缺失了

如果我一个ui已经编辑好了，但是有天因为一些需求，我改动了里面图片的名字或者路径，这时候重新打开studio进行遍及的时候，

我原来的那个ImageView的路径就会被替换成studio默认的图标路径。

这个相当不友好。更好的方式，应该是，发现图片文件不存在，则显示studio默认图片，但是对于json文件里面的这个路径，不应该做修改，

因为我们才好通过这个图片的路径去决定，我们应该怎么改，如果已经被默认页替换成studio的默认图片的路径了，就相当难下手，

不知道应该怎么改。然后在属性面板中的文件路径，给出红框表示图片不存在，引擎编辑者的注意。

美术需求变动，在项目中是非常常见的。

这个问题在我们使用git或者svn等进行多人协作开发的时候会产生各种蛋疼的问题。


## 工程绝对路径问题

工程的一些文件，例如*.ui.xml等，里面用了绝对路径，我只能说这个又是一个悲伤的故事。

在项目协作开发时，我们变成要采取不将这些文件提交到版本库中的方式，才不会老是出现冲突等问题。

但是有些文件又不好不提交，例如某个配置文件时用来罗列json列表的（由于我当前电脑中没有studio，也忘了叫什么名字了）。

这种东西，合理的应该是使用相对路径。

这个问题在我们使用git或者svn等进行多人协作开发的时候会产生各种蛋疼的问题。


## json列表

上面提到的json列表，其实不该这么直接配置在文件中，多人协作开发的时候，这个文件老是会冲突。

只要studio开启式，默认去扫描`Json`目录，自动去生成就好了。

这个问题在我们使用git或者svn等进行多人协作开发的时候会产生各种蛋疼的问题。


## 动画导出问题

在项目中，每个动画是单独的一个工程（好像studio不支持一个工程多个动画，而且，一个动画对应一个工程也比较合理）。

我有下面两个动画`hero1`和`hero2`

```
hero1
    Resources
        head.png
        body.png
    ...
    
hero2
    Resources
        head.png
        body.png
```

这时候，我就没法同时在项目中使用这两个动画，原因是他们的frameName冲突了。

这时候，我们只能在`Resources`文件夹中再多一个目录：

```
hero1
    Resources
        hreo1
        head.png
        body.png
    ...
    
hero2
    Resources
        hero2
            head.png
            body.png
```

但是这样使用起来挺蛋疼的，尤其是我们项目中变动动画名称是非常正常的，这时候就不容易修改。

更好的方式是，studio应该能支持导出的时候，有个模式选择，为每个frameName加上前缀，例如`hero1`中的`head.png`导出自动变成：`hero1/head.png`。


## 动画工程结构问题

个人认为，如果像上面所说的，设计上也是要一个动画对应一个项目的话，那么里面的命名就应该`单纯`。

例如相关配置文件的命名就应该统一，如叫：cca.***（那几个文件的后缀我忘了是什么了哈哈）。

而工程的名字可以由文件夹名字决定，或者只需配置在那个启动的xml文件中就好，其他的不需要。

项目中遇到改名是很正常的，就现在的结构，如果我只改了工程文件夹的名称而不改里面的内容的话，后期维护会相当混乱，

但是如果我里面也改的话，那么工作量就相当大，而且容易出错。


## 导出能支持命令行

现在只能手动通过studio导出，你知道这是一件多么悲伤地故事么！！！

导出一个项目就要打开一次studio，然后各种点击，导错了还要重来！！！这是多么浪费时间影响效率的事情啊！！！


## 能提供打包图片成大图的命令

现在我们项目中用TexturePacker来进行命令行打包，但是使用的是破解版，导出的图会有问题，这样，我们还要做很多处理。

如果studio能直接提供这个功能就好了。


## 导出的png大图没有去空白模式

参见TexturePacker的`trim`模式（应该是叫这个，现在手头上没装）。



# 定制

由于项目风险管理，我们不可能studio出一个最新版，我们就去更新，而且也跟我们使用的引擎版本有关。

所以，我们希望，studio是否能在1.3的基础之上，修复了以下几点问题，然后给我们打个程序包呢？

* 小数问题（迫切需要）

* 打开工程后没做修改，关闭工程（迫切需要）

* 能提供打包图片成大图的命令（迫切需要）

* json文件中，如果是工程所带图标，会变成绝对路径（最好能改）

* 如果项目图片缺失了（最好能改）

* 工程绝对路径问题（最好能改）


当然，如果上述提到的所有问题都能改，那是最好的哈哈。

谢谢关注！

